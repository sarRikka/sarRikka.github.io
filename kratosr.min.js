let kr={};window.requestIdleCallback=window.requestIdleCallback||function(e){let t=Date.now();return setTimeout(function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})},1)},window.cancelIdleCallback=window.cancelIdleCallback||function(e){clearTimeout(e)},(()=>{let n,o="";const a=(e,t=!0)=>{let n;const o=e/1e3,a=Math.floor(o/60/60/24),i=Math.floor(o/60/60-24*a),s=Math.floor(o/60-1440*a-60*i),r=Math.floor(o-86400*a-3600*i-60*s);let l=a.toString(),c=i.toString(),d=s.toString(),m=r.toString();return n=t?(l&&1===l.length&&(l="0"+l),c&&1===c.length&&(c="0"+c),d&&1===d.length&&(d="0"+d),m&&1===m.length&&(m="0"+m),l+"天"+c+"小时"+d+"分"+m+"秒"):a<540?a<60?l+"天":Math.floor(a/30).toString()+"个月":Math.floor(a/365).toString()+"年",n},e=()=>{(()=>{var n=document.getElementsByClassName("kratos-entry-thumb-new-img");let e=window.kr?.siteRoot||"/";(kr.picCDN||kr.pic?.CDN)&&(e="//cdn.jsdelivr.net/gh/Candinya/Kratos-Rebirth@latest/source/");const o=parseInt(kr.pic?.random_amount)||20;let a="images/thumb/thumb_{no}.webp";kr.pic&&kr.pic.filename&&(a=kr.pic.filename.includes("//")?kr.pic.filename:e+kr.pic.filename);const i=new Array(o+1),s=()=>{let t,e=5;for(;0<e&&(t=Math.floor(Math.random()*o+1),i[t]);)e--;if(e<=0){t=-1;for(let e=1;e<=o;e++)if(!i[e]){t=e;break}if(-1===t){for(let e=1;e<=o;e++)i[e]=!1;t=Math.floor(Math.random()*o+1)}}return i[t]=!0,t};for(let e=0,t=n.length;e<t;e++)if(!$(n[e]).attr("src")){const o=s(),i=a.replace("{no}",o.toString());$(n[e]).attr("src",i)}})(),void 0!==$.fancybox&&($.fancybox.defaults.hash=!1,$(".kratos-hentry").each(function(e){$(this).find("img").each(function(){var e;$(this).parent().hasClass("fancybox")||$(this).parent().hasClass("qrcode")||$(this).parent().is("a")||((e=this.alt)&&$(this).after('<span class="caption">'+e+"</span>"),$(this).wrap('<a rel="gallery" href="'+this.src+'" data-fancybox="gallery" data-caption="'+e+'"></a>'))})}),$(".fancybox").fancybox()),n=`\n\n-------------------------\n${kr.copyrightNotice}\n作者：${document.querySelector("meta[name='author']").getAttribute("content")}\n来源：${document.title}\n链接：${window.location.href}\n`,o=document.title,"undefined"!=typeof MathJax&&MathJax.Hub.Typeset(),document.querySelectorAll("figure.highlight").forEach((e,t)=>{e.getElementsByTagName("table")[0].getElementsByTagName("tbody")[0].getElementsByTagName("tr")[0].getElementsByClassName("code")[0].setAttribute("id",`code-${t}`),e.innerHTML+=`<button class="copy" data-clipboard-target="#code-${t}">\n                <i class="fa fa-copy"></i>&nbsp;复制\n            </button>`}),new ClipboardJS("button.copy").on("success",e=>{const t=e.trigger.innerHTML;e.trigger.innerHTML='<i class="fa fa-check-circle"></i>&nbsp;成功~',setTimeout(()=>{e.trigger.innerHTML=t},3e3),e.clearSelection()}),(()=>{const t="undefined"!=typeof window,e=t&&!("onscroll"in window)||"undefined"!=typeof navigator&&/(gle|ing|ro|msn)bot|crawl|spider|yand|duckgo/i.test(navigator.userAgent),n=t&&"IntersectionObserver"in window,o=document.querySelector(".post-comments.lazy-load"),a=()=>{window.loadCommentsEventHandler&&window.cancelIdleCallback(window.loadCommentsEventHandler),window.loadCommentsEventHandler=window.requestIdleCallback(load_comm),load_comm=null};if(t&&!e&&n&&null!==o){const t=new IntersectionObserver(e=>{e[0].isIntersecting&&(a(),t.disconnect())},{threshold:0});t.observe(o)}else"undefined"!=typeof load_comm&&null!==load_comm&&a()})(),(()=>{if(kr.expire_day){const e=document.getElementById("expire-alert");if(e){const t=e.querySelector("time"),n=new Date(parseInt(t.getAttribute("datetime"))),o=Date.now()-n;o>24*kr.expire_day*3600*1e3&&(t.innerText=a(o,!1),e.classList.remove("hidden"))}}})(),(()=>{if(null!==document.getElementById("krw-toc")){const e=document.getElementsByClassName("toc-item"),a=[];Array.from(e).forEach(e=>{const t=e.getElementsByClassName("toc-link")[0],n=decodeURI(t.getAttribute("href")),o=document.getElementById(n.replace("#","")).offsetTop;a.push({h:o,el:e})}),a.sort((e,t)=>e.h-t.h);const n=(e=-1)=>{let t;t=!Number.isInteger(e)||e<0||e>a.length-1?0:e;var n=window.scrollY;if(a[0].h>n)t=-1;else if(a[a.length-1].h<=n)t=a.length-1;else for(;!(a[t].h<=n&&a[t+1].h>n);)a[t].h>n&&0<t?t--:a[t+1].h<=n&&t<a.length-1&&t++;return t},o=(t,n)=>{if(t!==n){if(-1!==t){a[t].el.classList.remove("active"),a[t].el.classList.remove("show");let e=a[t].el;for(;!e.classList.contains("toc");)e.classList.contains("toc-item")&&e.classList.remove("show"),e=e.parentNode}if(-1!==n){a[n].el.classList.add("active"),a[n].el.classList.add("show");let e=a[n].el;for(;!e.classList.contains("toc");)e.classList.contains("toc-item")&&e.classList.add("show"),e=e.parentNode}}};let t=-1;const i=()=>{var e=n(t);o(t,e),t=e},s=()=>{let e=0;window.requestAnimationFrame(()=>{e&&clearTimeout(e),e=setTimeout(e=>{e===window.scrollY&&i()},100,window.scrollY)})};window.addEventListener("scroll",s),i(),window.addEventListener("pjax:before",()=>{a.length=0,window.removeEventListener("scroll",s)},{once:!0});const r=document.getElementsByClassName("toc-progress-bar")[0],l=()=>{r.style.width=(window.scrollY/document.body.clientHeight*100).toString()+"%"};window.addEventListener("scroll",()=>{window.requestAnimationFrame(l)}),l()}})()},t=()=>{e(),kr.copyrightNotice&&(document.body.oncopy=e=>{var t=window.getSelection().toString();150<t.length&&(e.preventDefault(),e.clipboardData&&e.clipboardData.setData("text/plain",t+n))}),(()=>{if(kr.siteLeaveEvent){let e;const t=$('[rel="icon"]').attr("href");document.addEventListener("visibilitychange",()=>{document.hidden?(document.title=kr.leaveTitle,kr.leaveLogo&&$('[rel="icon"]').attr("href",kr.leaveLogo),clearTimeout(e)):(document.title=kr.returnTitle+" "+o,kr.leaveLogo&&$('[rel="icon"]').attr("href",t),e=setTimeout(()=>{document.title=o,e=0},2e3))})}})(),(()=>{const e=new Date(kr.createTime),t=document.getElementById("span_dt");setInterval(()=>{t.innerText=a(Date.now()-e)},1e3)})(),$(document).on("click",".donate",()=>{layer.open({type:1,area:["300px","370px"],title:kr.donateBtn,resize:!1,scrollbar:!1,content:'<div class="donate-box"><div class="meta-pay text-center"><strong>'+kr.scanNotice+'</strong></div><div class="qr-pay text-center"><img class="pay-img" id="alipay_qr" src="'+kr.qr_alipay+'"><img class="pay-img d-none" id="wechat_qr" src="'+kr.qr_wechat+'"></div><div class="choose-pay text-center mt-2"><input id="alipay" type="radio" name="pay-method" checked><label for="alipay" class="pay-button"><img src="/images/alipay.webp"></label><input id="wechatpay" type="radio" name="pay-method"><label for="wechatpay" class="pay-button"><img src="/images/wechat.webp"></label></div></div>'}),$(".choose-pay input[type='radio']").click(function(){var e=$(this).attr("id");"alipay"==e&&($(".qr-pay #alipay_qr").removeClass("d-none"),$(".qr-pay #wechat_qr").addClass("d-none")),"wechatpay"==e&&($(".qr-pay #alipay_qr").addClass("d-none"),$(".qr-pay #wechat_qr").removeClass("d-none"))})}),(()=>{if(kr.topNavScrollToggle){let e=window.innerHeight,t=!1;window.addEventListener("wheel",()=>{window.requestAnimationFrame(()=>{e<window.scrollY?t||(document.body.classList.add("nav-up"),t=!0):e>window.scrollY&&t&&(document.body.classList.remove("nav-up"),t=!1),e=window.scrollY})})}})()};window.addEventListener("pjax:complete",e),window.addEventListener("window:onload",()=>{var e=t;fetch((window.kr?.siteRoot||"/")+"config/main.json").then(e=>e.json()).then(e=>{kr=e}).then(()=>{e()}),(()=>{let e=!1;var t=()=>{window.requestAnimationFrame(()=>{200<window.scrollY?e||(document.body.classList.add("scroll-down"),e=!0):e&&(document.body.classList.remove("scroll-down"),e=!1)})};$(".gotop-box").on("click",function(e){return $("html, body").animate({scrollTop:$("html").offset().top},500),!1}),t(),window.addEventListener("scroll",t)})(),(()=>{let e=$("#kratos-menu-wrap").clone();e.attr({id:"offcanvas-menu"}),e.filter("> ul").attr({class:"ul-me",id:""}),$("#kratos-page").prepend(e),$(".js-kratos-nav-toggle").on("click",()=>{$(".nav-toggle").hasClass("toon")?($(".nav-toggle").removeClass("toon"),$("#offcanvas-menu").css("right","-240px")):($(".nav-toggle").addClass("toon"),$("#offcanvas-menu").css("right","0px"))}),$("#offcanvas-menu").css("height",$(window).height()),$("#offcanvas-menu").css("right","-240px"),$(window).resize(()=>{const e=$(window);$("#offcanvas-menu").css("height",e.height()),769<e.width()&&$(".nav-toggle").hasClass("toon")&&($(".nav-toggle").removeClass("toon"),$("#offcanvas-menu").css("right","-240px"))})})(),$(document).click(e=>{const t=$("#offcanvas-menu,.js-kratos-nav-toggle");t.is(e.target)||0!==t.has(e.target).length||$(".nav-toggle").hasClass("toon")&&($(".nav-toggle").removeClass("toon"),$("#offcanvas-menu").css("right","-240px"))}),$(document).on("click",".xHeading",function(e){$(this).next().slideToggle(300),$(this).parent(".xControl").hasClass("active")?$(this).parent(".xControl").removeClass("active"):$(this).parent(".xControl").addClass("active"),e.preventDefault()}),$(document).on("click",".share",()=>{$(".share-wrap").fadeToggle("slow")}),$(document).on("click","a[class=toc-link]",function(){return $("html, body").animate({scrollTop:$(decodeURI($(this).attr("href"))).offset().top-60},500),!1})},{once:!0}),window.onload=()=>{window.dispatchEvent(new Event("window:onload")),console.log("页面加载完毕！消耗了 %c"+Math.round(100*performance.now())/100+" ms","background:#282c34;color:#51aded;")}})();