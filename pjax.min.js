$(function(){const c="#kratos-blog-post .row";theTop=window.kr?.notMobile?$("#kratos-blog-post").offset().top-40:0,window.addEventListener("popstate",t=>{t.state&&(document.title=t.state.title||document.title,$("body,html").animate({scrollTop:theTop},600),void 0===t.state.content?e(t.state.url,!1):$(c).html(t.state.content),OriginTitile=document.title,window.dispatchEvent(l.complete))});const l={before:new Event("pjax:before"),success:new Event("pjax:success"),complete:new Event("pjax:complete"),error:new Event("pjax:error")};function e(n,o){let i=!1;$.ajax({url:n,beforeSend:function(){"undefined"!=typeof load_comm&&null!==load_comm&&(load_comm=null),$("body,html").animate({scrollTop:theTop},600),NProgress.start(),window.dispatchEvent(l.before)},success:function(t,e,o){void 0!==$(t).find(c).html()&&(i=!0),window.dispatchEvent(l.success)},complete:function(t,e){if(i){const l=t.responseText;history.replaceState({url:location.href,title:document.title,content:$(document).find(c).html()},document.title,location.href);const i=$(l).filter("title").text(),e=$(l).find(c).html();o&&window.history.pushState({url:n,title:i,content:e},i,n),document.title=i,$(c).html(e),OriginTitile=document.title;t=n.match(/\#.+$/);t&&$("body,html").animate({scrollTop:$(t[0]).offset().top-40},600)}else window.open(n);NProgress.done(),window.dispatchEvent(l.complete)},timeout:6e3,error:function(t,e,o){console.error(o),location.href=n,window.dispatchEvent(l.error)}})}$(document).on("click","a[target!=_blank][rel!=gallery][class!=toc-link]",function(){const t=$(this).attr("href");return void 0===t||!!t.includes("javascript:")||(e(decodeURI(t),!0),!1)})});